{% from "macros.html" import pagination %}
{% from "decks/macros.html" import deck_details %}
{% extends "base.html" %}
{% block title %}{{ 'My Decks' | paged_title(page) }}{% endblock %}
{% block page_class %}sidebar-first deck-listing{% endblock %}

{% block heading %}
	<h1 class="phg-basic-magic">My decks</h1>
{% endblock %}

{% block content %}
	<form action="./" method="GET" class="auto-submit no-margin">
		<div class="responsive-cols">
			<div class="input-group col-flex">
				<div class="form-field">
					<input type="text" placeholder="Filter by title..." id="searchbox" name="s" value="{{ filters.s | default('') }}">
				</div>
				<button class="btn" title="Filter"><i class="fa fa-search"></i></button>
			</div>
			<div class="form-field col-flex">
				<select name="phoenixborn">
					<option value="">Filter by Phoenixborn...</option>
					{% for card in phoenixborn %}
					<option value="{{ card.stub }}"{% if filters.phoenixborn == card.stub %} selected{% endif %}>{{ card.name }}</option>
					{% endfor %}
				</select>
			</div>
			<div class="btn-group col">
				<a href="{{ url_for('decks.mine') }}" class="btn" title="Clear filters"><i class="fa fa-times"></i></a>
			</div>
		</div>
		<noscript>
		<div class="col">
			<input type="submit" value="Filter Decks" class="btn btn-primary">
		</div>
		</noscript>
	</form>

	{% if decks %}
	<ul class="deck-list">
	{% for deck in decks %}
		<li class="deck {{ deck.phoenixborn.stub }}">
			{{ deck_details(deck, card_map, current_user, latest_ashes_500=latest_ashes_500) }}
		</li>
	{% endfor %}
	</ul>
	{{ pagination('decks.mine', pages, page=page) }}
	{% elif filters %}
	<div class="no-results">
		<h2>No decks found</h2>
		<p><a href="{{ url_for('decks.mine') }}" class="btn btn-primary">Clear filters</a></p>
	</div>
	{% else %}
	<p class="callout">You have not created any decks yet! Let's get cracking! <i class="fa fa-arrow-right"></i></p>
	{% endif %}
{% endblock %}

{% block sidebar %}
	<a href="{{ url_for('decks.build') }}" class="btn btn-block btn-success">
		<i class="fa fa-plus"></i> New Deck
	</a>

	<p>You are viewing your private decks. To publish a deck, visit the Actions tab in the deck builder.</p>
{% endblock %}
